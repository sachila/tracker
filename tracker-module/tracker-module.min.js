!function(){function a(){return{restrict:"E",template:'<div flex="25"><md-card><md-card-content style="background-color:rgba(0,0,0,0.09);cursor:move"><div><label style="font-size:16px;position:relative;top:-4px">{{vm.timeStatus | timerFilter }}</label><md-button ng-show="vm.startButton" type="button" class="md-icon-button" ng-click="vm.startTimer()" autofocus><ng-md-icon icon="play_arrow" size="22"></ng-md-icon><md-tooltip>Start</md-tooltip></md-button><md-button ng-show="vm.pauseButton" type="button" class="md-icon-button" ng-click="vm.pauseTimer()"><ng-md-icon icon="pause" size="22"></ng-md-icon><md-tooltip>Pause</md-tooltip></md-button><md-button ng-show="vm.stopButton" type="button" class="md-icon-button" ng-click="vm.stopTimer()"><ng-md-icon icon="stop" size="22"></ng-md-icon><md-tooltip>Stop</md-tooltip></md-button><md-button type="button" class="md-icon-button" ng-click="vm.resetTimer()"><ng-md-icon icon="autorenew" size="22"></ng-md-icon><md-tooltip>Reset</md-tooltip></md-button></div><div></div></md-card-content></md-card></div>',controller:b,controllerAs:"vm",scope:{config:"="},bindToController:{stopFunc:"&",startFunc:"&",pauseFunc:"&",resetFunc:"&"}}}function b(a,b,c,d){function f(){var a=[],b=[];if(window.localStorage&&localStorage.getItem(e.config.cacheName)){var a=localStorage.getItem(e.config.cacheName),b=JSON.parse(a);localStorage.setItem(e.config.cacheName,JSON.stringify(b))}}function g(){e.timeRun&&b.cancel(e.timeRun),e.timeUpdate=function(){e.timeStatus++},e.timeRun=b(e.timeUpdate,10)}var e=this;e.timeStatus=0,e.lapTime=0,e.laps=[],e.timerStatus=!1,e.todayDate=new Date,c(function(){e.startButton=!0,e.stopButton=!1,e.pauseButton=!1,e.initCatch()},1e3),e.config&&e.config.cacheName||(e.config={cacheName:"defaultCache"}),e.initCatch=function(){if(localStorage.getItem(e.config.cacheName)){e.remainTime=localStorage.getItem(e.config.cacheName);var a=JSON.parse(e.remainTime);if(e.remainTime){e.startButton=!1,e.stopButton=!0,e.pauseButton=!0;var b=a[0].startTime;e.timeDiff=(new Date).getTime()-new Date(b).getTime(),e.timeStatus=e.timeDiff/10,g()}}},window.addEventListener("focus",function(a){e.initCatch()}),window.addEventListener("blur",function(a){f()}),window.addEventListener("beforeunload",function(a){f()}),e.startTimer=function(){if(e.startTime=e.timeStatus,e.startButton=!1,e.stopButton=!0,e.pauseButton=!0,!localStorage.getItem(e.config.cacheName)){var a=[{name:e.config.cacheName,startTime:new Date}];localStorage.setItem(e.config.cacheName,JSON.stringify(a))}g(),e.startFunc({time:e.timeStatus/100})},e.pauseTimer=function(){e.pauseButton=!1,e.startButton=!0,e.timerStatus=!e.timerStatus,e.timeRun&&(b.cancel(e.timeRun),e.startTime=e.timeStatus),e.result=e.timeStatus,e.pauseFunc({time:e.timeStatus/100})},e.stopTimer=function(){e.startButton=!0,e.stopButton=!1,e.pauseButton=!1,window.localStorage&&localStorage.removeItem(e.config.cacheName),e.timerStatus=!e.timerStatus,e.timeRun&&(b.cancel(e.timeRun),e.startTime=e.timeStatus),e.result=e.timeStatus,e.stopFunc({time:e.timeStatus/100}),e.timeStatus=0},e.resetTimer=function(){e.startButton=!0,e.stopButton=!1,e.pauseButton=!1,window.localStorage&&localStorage.removeItem(e.config.cacheName),e.resetFunc({time:e.timeStatus/100}),e.timeStatus=0,e.laps=[],b.cancel(e.timeRun)},e.lapTimer=function(){e.lapTime=e.timeStatus-e.startTime,e.startTime=e.timeStatus,e.laps.push(e.lapTime)},e.getTotal=function(){var a=0;if(0!=e.laps.length){for(var b=0;b<e.laps.length;b++)a+=e.laps[b];return a/100+" Sec"}a=0}}function c(){return function(a){var b=a,c=Math.floor(b/100)%60,d=Math.floor(b/6e3),e=Math.floor(b/36e4);return d>=60&&(d%=60),e<10&&(e="0"+e),d<10&&(d="0"+d),c<10&&(c="0"+c),e+"h "+d+"m "+c+"s"}}function d(){return{restrict:"A",link:function(a,b,c,d){b.draggable()}}}angular.module("rasm-tracker",["ngMdIcons"]).directive("timeTracker",a),b.$inject=["$scope","$interval","$timeout","$window"],angular.module("rasm-tracker").filter("timerFilter",c),c.$inject=[],angular.module("rasm-tracker").directive("dragTracker",d),d.$inject=[]}();